# EstateManager V3.0 - User Guide

## Welcome to EstateManager V3.0! üéâ

This guide will help you master the new features and workflows in V3.0.

---

## Table of Contents

1. [Getting Started](#getting-started)
2. [Core Concepts](#core-concepts)
3. [Property Management](#property-management)
4. [Sell Cycles](#sell-cycles)
5. [Purchase Cycles](#purchase-cycles)
6. [Rent Cycles](#rent-cycles)
7. [Buyer Requirements](#buyer-requirements)
8. [Internal Matches](#internal-matches)
9. [Tips & Best Practices](#tips--best-practices)
10. [FAQs](#faqs)

---

## Getting Started

### First-Time Launch

1. **Migration Prompt** (if you have V2.0 data):
   - You'll see a migration prompt
   - Click "Migrate Now" to convert your data
   - Migration takes < 1 second
   - Your data is automatically backed up

2. **Dashboard Overview**:
   - View all active properties
   - See internal matches
   - Track cycles by type
   - Quick stats at a glance

---

## Core Concepts

### What Changed in V3.0?

#### Properties are Permanent Assets
- **Old way (V2.0)**: Properties were temporary listings
- **New way (V3.0)**: Properties are permanent physical assets

#### Cycles Track Activities
- **Sell Cycle**: When you're selling a property
- **Purchase Cycle**: When you're buying a property (3 types!)
- **Rent Cycle**: When you're renting out a property

#### Multiple Cycles Allowed
- Same property can have **multiple simultaneous cycles**
- Example: Selling + Buying back + Renting simultaneously

#### Internal Matches
- System **automatically detects** when you have both sell and purchase cycles
- Shows potential revenue
- Warns about dual representation

---

## Property Management

### Creating a Property

1. **Click "Add Property"**
2. **Fill in Physical Details**:
   - Address
   - Property type (house, apartment, villa, etc.)
   - Bedrooms, bathrooms
   - Area (sq ft or sq yards)
   - Features (parking, garden, etc.)
   - Description
   - Images (optional)

3. **Select Owner**:
   - Search existing owners
   - Or quick-add new owner

4. **Save Property**

5. **Choose Next Action** (modal appears):
   - **Start Selling** - Create sell cycle
   - **Start Purchasing** - Create purchase cycle
   - **Start Renting** - Create rent cycle
   - **Do Later** - Just save the property

> üí° **Tip**: You can always add cycles later from the property details page!

### Viewing Property Details

Click any property card to see:
- **Overview Tab**: Property details, current owner
- **Cycles Tab**: All active cycles (sell, purchase, rent)
- **History Tab**: Ownership history, cycle history

---

## Sell Cycles

### When to Use Sell Cycles

Use sell cycles when:
- You're listing a property for sale
- Owner wants to sell
- You need to track offers and negotiations

### Creating a Sell Cycle

1. **Go to Property** ‚Üí Click "Start Sell Cycle"
2. **Fill Seller Information**:
   - Seller name (usually the owner)
   - Seller type (owner/investor/bank)
   - Contact information

3. **Set Pricing**:
   - Asking price
   - Minimum acceptable price (optional)

4. **Configure Commission**:
   - Type: Percentage or Fixed amount
   - Rate: e.g., 2% or PKR 1,000,000

5. **Optional Settings**:
   - Exclusive listing
   - Marketing plan
   - Timeline

6. **Save**

### Managing Offers

1. **View Sell Cycle** ‚Üí Go to "Offers" tab
2. **Offers appear automatically** when added
3. **Actions per offer**:
   - **Accept**: Accept the offer
   - **Reject**: Decline the offer
   - **Counter**: Make a counter-offer

### Closing a Sale

1. **Go to Sell Cycle**
2. **Click "Close Sale"**
3. **Enter Final Sale Price**
4. **Confirm**

Result:
- Sell cycle status ‚Üí "sold"
- Commission calculated
- Ownership can be transferred

---

## Purchase Cycles

### Three Types of Purchases

EstateManager V3.0 supports **three purchaser types**:

#### 1. Agency Purchase üè¢
**When**: Your agency is buying as an investment
**Use for**:
- Flip projects (buy, renovate, sell)
- Hold investments (buy and rent)
- Portfolio building

**Features**:
- ROI calculator
- Renovation budget tracking
- Expected profit calculation
- No commission (internal investment)

**Example**: "We're buying this property to renovate and resell"

#### 2. Investor Purchase üíº
**When**: You're facilitating a purchase for an investor
**Use for**:
- Connecting investors with properties
- Earning facilitation fees
- Building investor relationships

**Features**:
- Facilitation fee configuration
- Investor contact management
- Simple, streamlined workflow

**Example**: "Mr. Khan wants to buy this property, and I'll earn a PKR 1M facilitation fee"

#### 3. Client Purchase üë§
**When**: You're representing a buyer client
**Use for**:
- Traditional buyer representation
- Helping clients find their dream home
- Earning buyer-side commission

**Features**:
- Commission calculator
- Commission source (buyer/seller/split)
- Pre-qualification tracking
- Budget management

**Example**: "I'm helping the Ahmed family buy this house, and I'll earn 2% commission"

### Creating a Purchase Cycle

1. **Go to Property** ‚Üí Click "Start Purchase Cycle"
2. **Select Purchaser Type** (Agency, Investor, or Client)
3. **Fill Type-Specific Form**:
   - **Agency**: Investment strategy, ROI, renovation budget
   - **Investor**: Investor details, facilitation fee
   - **Client**: Client details, commission, budget

4. **Set Offer Amount**
5. **Choose Financing Type**
6. **Save**

### Completing a Purchase

1. **Go to Purchase Cycle**
2. **Click "Complete Purchase"**
3. **Enter Final Purchase Price**
4. **Confirm**

Result:
- Purchase cycle status ‚Üí "completed"
- Ownership automatically transfers (if applicable)
- Commission/fee calculated

---

## Rent Cycles

### When to Use Rent Cycles

Use rent cycles when:
- Listing property for rent
- Managing tenant applications
- Tracking leases and payments

### Creating a Rent Cycle

1. **Go to Property** ‚Üí Click "Start Rent Cycle"
2. **Fill Landlord Information**:
   - Landlord name
   - Landlord type (owner/investor)
   - Contact

3. **Set Rent Details**:
   - Monthly rent
   - Security deposit
   - Advance rent (usually 1-2 months)

4. **Configure Lease Terms**:
   - Lease duration (months)
   - Available from date
   - Minimum lease duration

5. **Property Requirements**:
   - Pets allowed?
   - Furnishing status
   - Utilities included?

6. **Commission**:
   - Type: Percentage or Fixed
   - Rate: e.g., 1 month rent

7. **Save**

### Managing Tenant Applications

1. **Applications Tab** in rent cycle
2. **Review Applications**:
   - Tenant details
   - Income verification
   - Family size

3. **Actions**:
   - **Approve**: Move to lease signing
   - **Reject**: Decline application

### Signing a Lease

1. **After approving application**
2. **Click "Sign Lease"**
3. **Fill Lease Details**:
   - Start date
   - End date
   - Monthly rent
   - Security deposit

4. **Confirm**

Result:
- Rent cycle status ‚Üí "leased"
- Current lease created
- Payment tracking enabled

### Recording Rent Payments

1. **Go to Payments Tab**
2. **Click "Record Payment"**
3. **Enter**:
   - Amount
   - Payment date
   - Payment method

4. **Save**

---

## Buyer Requirements

### What are Buyer Requirements?

Buyer Requirements are **separate from properties**. They represent:
- What your client is looking for
- Search criteria
- Must-have features
- Budget range

> üí° **Important**: Buyer Requirement ‚â† Purchase Cycle
> - **Buyer Requirement** = "They're looking for..."
> - **Purchase Cycle** = "They made an offer on..."

### Creating a Buyer Requirement

1. **Go to Buyer Requirements**
2. **Click "Add Requirement"**
3. **Fill Details**:
   - Buyer information
   - Budget range (min - max)
   - Property types
   - Bedrooms/bathrooms
   - Preferred locations
   - Must-have features

4. **Set Timeline**:
   - Urgency (low/medium/high)
   - Target move date

5. **Financing**:
   - Pre-approved?
   - Financing type

6. **Save**

### Auto-Matching

When you add new properties, the system **automatically checks** if they match any buyer requirements!

**Matched properties appear** in:
- Buyer Requirement details ‚Üí "Matches" tab
- Property appears in requirement's matched list

### From Requirement to Purchase

When your buyer decides to make an offer:
1. **View matched property**
2. **Click "Make Offer"**
3. **Creates Purchase Cycle** (client type)
4. **Continue with purchase workflow**

---

## Internal Matches

### What are Internal Matches?

Internal matches occur when you have:
- **Both** a sell cycle AND purchase cycle
- On the **same property**

This means you represent **both buyer and seller**!

### Internal Matches Widget

**Dashboard widget shows**:
- Properties with matches
- Price gap (asking vs offer)
- Potential revenue
- Priority level (high/medium/low)

**Priority Levels**:
- üü¢ **High**: Gap ‚â§ 10% (easy deal!)
- üü° **Medium**: Gap 10-25% (negotiable)
- üî¥ **Low**: Gap > 25% (difficult)

### Dual Representation Warning

When same agent represents both sides:
- **Warning displayed**
- Must obtain written consent from both parties
- Must remain neutral
- Document all communications

### Reviewing a Match

1. **Click match** in widget
2. **MatchReviewModal opens** with 4 tabs:

   **Overview Tab**:
   - Quick stats
   - Potential revenue
   - Match quality

   **Sell Side Tab**:
   - Seller information
   - Asking price
   - Commission details

   **Purchase Side Tab**:
   - Purchaser information
   - Offer amount
   - Type-specific details

   **Deal Proposal Tab**:
   - Propose middle price
   - Live commission calculator
   - Compare all prices

### Proposing an Internal Deal

1. **Go to Deal Proposal tab**
2. **Enter Proposed Price**
3. **Review Commission**:
   - Sell side commission
   - Purchase side commission (if client)
   - Total revenue

4. **Add Notes**
5. **Click "Propose Deal"**

Result:
- Both parties notified
- Deal tracked in system
- Commission calculated

---

## Tips & Best Practices

### Property Management

‚úÖ **DO**:
- Add all property details upfront
- Upload quality images
- Keep descriptions accurate
- Update features regularly

‚ùå **DON'T**:
- Skip owner information
- Forget to add location details
- Leave bedrooms/bathrooms empty

### Cycle Management

‚úÖ **DO**:
- Create cycles as soon as activity starts
- Update status regularly
- Track all offers/applications
- Close cycles when complete

‚ùå **DON'T**:
- Leave cycles open indefinitely
- Forget to update pricing
- Miss recording offers

### Internal Matches

‚úÖ **DO**:
- Check matches daily
- Review dual representation warnings
- Get written consent from both parties
- Document all communications
- Remain neutral

‚ùå **DON'T**:
- Ignore dual representation
- Favor one party over another
- Skip documentation
- Hide conflicts of interest

### Buyer Requirements

‚úÖ **DO**:
- Add detailed criteria
- Update urgency levels
- Track viewing feedback
- Close when buyer finds property

‚ùå **DON'T**:
- Make requirements too specific
- Forget to update matched properties
- Leave old requirements active

---

## FAQs

### General Questions

**Q: What if I accidentally create a cycle?**
**A:** You can cancel any cycle from its details page. The property remains, only the cycle is removed.

**Q: Can I have multiple sell cycles on same property?**
**A:** Yes! You might be listing for both the current owner and a potential investor simultaneously.

**Q: What happens to old properties when I migrate?**
**A:** Old "for-sale" becomes Property + Sell Cycle. Old "for-rent" becomes Property + Rent Cycle. Everything is preserved!

### Sell Cycles

**Q: Can I change the asking price later?**
**A:** Yes! Go to sell cycle ‚Üí Edit ‚Üí Update asking price.

**Q: What if seller rejects all offers?**
**A:** Keep the cycle active and wait for better offers. Or update pricing strategy.

**Q: How do I share a listing with another agent?**
**A:** Go to sell cycle ‚Üí Marketing tab ‚Üí Share with agents.

### Purchase Cycles

**Q: Which purchaser type should I choose?**
**A:**
- Your agency buying? ‚Üí **Agency**
- Investor client? ‚Üí **Investor**
- Regular buyer client? ‚Üí **Client**

**Q: Can I change purchaser type later?**
**A:** No. Cancel the cycle and create new one with correct type.

**Q: What's the difference between facilitation fee and commission?**
**A:**
- **Facilitation fee**: Flat fee for connecting investor with property
- **Commission**: Percentage of sale price for representing buyer

### Rent Cycles

**Q: Can I have multiple tenants?**
**A:** One lease at a time. When lease ends, you can sign new lease with different tenant.

**Q: What if tenant doesn't pay rent?**
**A:** Record the missed payment in Payments tab. Track arrears manually.

**Q: How do I end a lease early?**
**A:** Go to Lease tab ‚Üí End Lease ‚Üí Enter end date and reason.

### Internal Matches

**Q: Do I have to act on internal matches?**
**A:** No, they're just opportunities. You can ignore or pursue them.

**Q: Is dual representation legal?**
**A:** Check local regulations. Always get written consent from both parties.

**Q: What if buyer and seller are far apart on price?**
**A:** Use the deal proposal tool to find middle ground. Show both parties the potential.

---

## Quick Reference

### Common Workflows

**Listing a Property for Sale:**
1. Add Property
2. Choose "Start Selling"
3. Fill seller details
4. Set pricing & commission
5. Share listing
6. Receive & manage offers
7. Accept best offer
8. Close sale

**Representing a Buyer:**
1. Add Buyer Requirement (what they want)
2. System auto-matches properties
3. Schedule viewings
4. When ready to offer ‚Üí Create Purchase Cycle (Client type)
5. Submit offer
6. Negotiate
7. Complete purchase

**Renting a Property:**
1. Add Property
2. Choose "Start Renting"
3. Fill landlord details
4. Set rent terms
5. Receive applications
6. Approve best tenant
7. Sign lease
8. Track payments

**Agency Investment:**
1. Find property
2. Create Purchase Cycle (Agency type)
3. Set investment strategy
4. Calculate ROI
5. Complete purchase
6. Property becomes inventory
7. Later: Create Sell Cycle to resell

---

## Need Help?

### Resources
- **Migration Guide**: `/MIGRATION-GUIDE.md`
- **Implementation Progress**: `/V3-IMPLEMENTATION-PROGRESS.md`
- **Guidelines**: `/Guidelines.md`

### Testing Features
Open browser console and try:
```javascript
// Run all tests
window.runE2ETests();

// Load test data
window.testData.loadV2TestData();

// View data summary
window.testData.printDataSummary();
```

---

**Version:** V3.0  
**Last Updated:** December 2024  
**Status:** Production Ready ‚úÖ

---

**Happy Managing! üè°üìäüíº**
